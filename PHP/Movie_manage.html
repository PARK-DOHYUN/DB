<html>
<head>
    <title>Movie tuple insert</title>
    <meta charset="UTF-8">
    <!-- 반응형 웹 디자인을 위한 뷰포트 설정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<!-- ========================================
     CSS 스타일 정의
     ======================================== -->
<style>
/* 
 * 메인 컨테이너 스타일
 * 목적: 헤더 영역을 3등분하여 중앙에 제목 배치
 */
div.mydiv {
  width:70%;        /* 화면 너비의 70% 사용 */
  overflow:auto;    /* 내용이 넘칠 경우 스크롤바 표시 */
}

/* 
 * 컨테이너 내부의 각 div (3등분 레이아웃)
 * float:left로 수평 배치
 */
div.mydiv div {
  width:33%;        /* 각 div가 전체의 33.3% 차지 (3등분) */
  float:left;       /* 왼쪽부터 수평으로 배치 */
}
</style>

<body>
    <!-- ========================================
         페이지 헤더: 3등분 레이아웃
         ======================================== -->
    <!-- 
         구조: [빈 공간] [제목] [빈 공간]
         목적: 제목을 중앙에 배치하기 위한 레이아웃
    -->
    <div class="mydiv">
        <!-- 왼쪽 빈 공간 (33%) -->
        <div>
        <h1></h1>
        </div>
        
        <!-- 중앙 제목 영역 (33%) -->
        <div style="background-color: blue;">
        <h2 align="center" style="color:white;">Movie Table 관리</h2>
        </div>
        
        <!-- 오른쪽 빈 공간 (33%) -->
        <div>
        <h1></h1>
        </div>
    </div>
    
    <!-- ========================================
         영화 관리 폼
         ======================================== -->
    <!-- 
         method="post": POST 방식으로 데이터 전송
         target="iframe1": 결과를 하단 iframe에 표시
         action="movie_manage.php": 처리 스크립트
         
         주요 기능:
         1. 영화 검색 (제목, 연도, 상영시간, 제작자, 영화사)
         2. 영화 삽입 (새로운 영화 추가)
         3. 영화 갱신 (기존 영화 정보 수정)
         4. 영화 삭제 (체크박스로 선택된 영화 삭제)
    -->
    <form method="post" target="iframe1" action="movie_manage.php">
        <table style="border:2px solid grey;background-color: white;color: black;" cellspacing="2px" cellpadding="2px" width="70%">
            
            <!-- ===== 테이블 헤더 행 ===== -->
            <!-- 보라색 배경, 흰색 글자, 중앙 정렬 -->
            <tr style="border:2px solid blue;background-color: purple;color: white;" align="center"> 
                <th width="40%"> 영화제목 
                <th> 개봉년도 
                <th> 상영시간 
                <th> 제작자 번호 
                <th width="10%"> 영화사 
            </tr> 
            
            <!-- ===== 입력 필드 행 ===== -->
            <!-- 파란색 배경 (#3399FF), 회색 글자 (#E0E0E0) -->
            <tr style="border:2px solid blue;background-color: #3399FF;color: #E0E0E0;" align="center"> 
                
                <!-- 영화 제목 입력 -->
                <td> <input type="text" size="50" maxlength="100" name="title">
                <!-- 
                     type="text": 텍스트 입력 필드
                     size="50": 입력 필드 너비 (문자 수)
                     maxlength="100": 최대 100자까지 입력 가능
                     name="title": PHP에서 $_POST["title"]로 접근
                     
                     용도:
                     - 검색: 부분 일치 검색 (LIKE '%title%')
                     - 삽입: 새 영화의 제목
                     - 갱신: 수정할 영화의 제목 (WHERE 조건)
                -->
                
                <!-- 개봉 연도 입력 -->
                <td> <input type="number" min="1900" max="2025" size="4" maxlength="4" name="year">
                <!-- 
                     type="number": 숫자만 입력 가능
                     min="1900", max="2025": 1900~2025년 범위
                     
                     용도:
                     - 검색: 정확한 연도 검색
                     - 삽입: 새 영화의 개봉 연도
                     - 갱신: 수정할 영화의 연도 (WHERE 조건)
                -->
                
                <!-- 상영시간 입력 -->
                <td> <input type="number" min="50" max="300" size="3" maxlength="3" name="length">
                <!-- 
                     min="50", max="300": 50~300분 범위
                     
                     용도:
                     - 검색: 정확한 상영시간 검색
                     - 삽입: 새 영화의 상영시간
                     - 갱신: 수정할 상영시간 (SET 절)
                -->
                
                <!-- 제작자 번호 입력 -->
                <td> <input type="number" min="1" max="100" size="3" maxlength="3" name="pno">
                <!-- 
                     producerno (제작자 인증번호)
                     movieexec 테이블의 certno와 외래키 관계
                     
                     용도:
                     - 검색: 특정 제작자의 영화 검색
                     - 삽입: 새 영화의 제작자 지정
                     - 갱신: 제작자 변경 (SET 절)
                -->
                
                <!-- 영화사 이름 입력 -->
                <td> <input type="text" size="10" maxlength="50" name="sname">
                <!-- 
                     studioname (영화사 이름)
                     studio 테이블의 name과 외래키 관계
                     
                     용도:
                     - 검색: 특정 영화사의 영화 검색
                     - 삽입: 새 영화의 제작 영화사 지정
                     - 갱신: 영화사 변경 (SET 절)
                -->
            </tr>
            
            <!-- ===== 체크박스 행 (삭제 기능용) ===== -->
            <!-- 
                 주의: 이 체크박스들은 현재 사용되지 않는 것으로 보임
                 실제 삭제는 검색 결과 테이블의 체크박스로 수행됨
                 (movie_manage.php의 출력 부분 참조)
            -->
            <tr>
                <td colspan="5"> 
                    <input type="checkbox" name="mv" value="Fox">Fox
                    <input type="checkbox" name="mv" value="Mgm">Mgm
                    <input type="checkbox" name="mv" value="Disney">Disney
                <!-- 
                     name="mv": 배열로 전송 (mv[])
                     value: 영화사 이름
                     
                     참고: 실제 코드에서는 "제목|연도" 형식의 값이 사용됨
                     (예: "Avatar|2009")
                -->
            </tr>
            
            <!-- ===== 버튼 행 ===== -->
            <tr style="border:none;background-color: white;color: #E0E0E0;" align="left"> 
                <td colspan="5">
                    <!-- 검색 버튼: 입력된 조건으로 영화 검색 -->
                    <input type="submit" name="submit" value="검색">
                    <!-- 
                         클릭 시: $_POST["submit"] = "검색"
                         동작: WHERE 조건 생성 후 SELECT 수행
                    -->
                    
                    <!-- 삽입 버튼: 새로운 영화 추가 -->
                    <input type="submit" name="submit" value="삽입">
                    <!-- 
                         클릭 시: $_POST["submit"] = "삽입"
                         동작: INSERT INTO movie 수행
                         필수 입력: title, year (중복 확인 권장)
                    -->
                    
                    <!-- 갱신 버튼: 기존 영화 정보 수정 -->
                    <input type="submit" name="submit" value="갱신">
                    <!-- 
                         클릭 시: $_POST["submit"] = "갱신"
                         동작: UPDATE movie SET ... WHERE title=... AND year=...
                         주의: title과 year로 영화를 식별
                    -->
                    
                    <!-- 초기화 버튼: 모든 입력 필드 초기화 -->
                    <input type="reset" name="reset" value="초기화">
                    <!-- 
                         type="reset": 폼의 모든 입력을 초기 상태로 되돌림
                         서버로 전송되지 않음 (클라이언트 동작만)
                    -->
            </tr>
            
            <!-- ===== iframe 결과 표시 영역 ===== -->
            <!-- 
                 목적: 
                 1. 검색 결과 테이블 표시
                 2. 삽입/갱신/삭제 작업 결과 메시지 표시
                 3. 페이지 새로고침 없이 결과 확인
            -->
            <tr height="800px">
                <td colspan="5"> 
                    <iframe height="800px" width="100%" name="iframe1" style="border:1px solid blue;"></iframe>
                    <!-- 
                         name="iframe1": 폼의 target과 일치
                         height="800px": 충분한 높이 확보 (검색 결과 표시용)
                         width="100%": 전체 너비 사용
                         
                         동작 흐름:
                         1. 사용자가 버튼 클릭 (검색/삽입/갱신)
                         2. movie_manage.php 실행
                         3. 결과 HTML이 이 iframe에 표시됨
                         4. 메인 페이지는 유지 (입력 필드 그대로)
                    -->
            </tr>
        </table>
    </form>
</body>
</html>

<!-- 
========================================
페이지 기능 요약:
========================================

1. 검색 기능:
   - 5가지 조건 조합 가능 (제목, 연도, 시간, 제작자, 영화사)
   - 제목은 LIKE 검색 (부분 일치)
   - 나머지는 정확한 일치 검색
   - 결과를 iframe에 테이블로 표시

2. 삽입 기능:
   - 새로운 영화 튜플 추가
   - 필수 필드: title, year (기본키)
   - incolor는 자동으로 't' (컬러)
   - 외래키 제약: producerno, studioname 존재 확인 필요

3. 갱신 기능:
   - 기존 영화의 length, studioname, producerno 수정
   - title과 year로 영화 식별 (WHERE 조건)
   - 기본키(title, year)는 변경 불가

4. 삭제 기능:
   - 검색 결과에서 체크박스로 선택
   - 'delete' 버튼 클릭
   - "제목|연도" 형식으로 전달
   - 여러 영화 동시 삭제 가능

========================================
사용자 시나리오:
========================================

시나리오 1: 영화 검색 후 삭제
1. 제목 입력: "star"
2. "검색" 클릭
3. 검색 결과에서 삭제할 영화 체크
4. "delete" 클릭

시나리오 2: 새 영화 추가
1. 모든 필드 입력
   - 제목: "New Movie"
   - 연도: 2024
   - 시간: 120
   - 제작자 번호: 5
   - 영화사: "Disney"
2. "삽입" 클릭
3. 성공 메시지 확인

시나리오 3: 영화 정보 수정
1. 제목과 연도 입력 (수정할 영화 식별)
2. 변경할 필드 입력 (시간, 제작자, 영화사)
3. "갱신" 클릭
4. 성공 메시지 확인

========================================
UI/UX 특징:
========================================

장점:
1. 단일 페이지에서 모든 작업 수행
2. iframe으로 결과 즉시 확인
3. 입력 필드 유지 (연속 작업 가능)
4. HTML5 입력 검증 (type="number", min, max)

개선 가능 영역:
1. 중복 영화 삽입 방지 (클라이언트 확인)
2. 필수 필드 표시 (*)
3. 삭제 확인 다이얼로그
4. 반응형 디자인 (모바일 대응)
5. 접근성 개선 (label 태그)

========================================
보안 고려사항:
========================================

1. SQL 인젝션 방지:
   - movie_manage.php에서 바인드 변수 사용
   - oci_bind_by_name() 사용

2. XSS 방지:
   - htmlentities() 사용 (출력 시)
   - 사용자 입력을 그대로 출력하지 않음

3. CSRF 방지 권장:
   - 토큰 추가 (현재 미구현)
   - 세션 기반 검증

========================================
-->
